<!DOCTYPE html>
<html lang="en">
	<head>
		<title><%= sTitle %></title>
		<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
		<script src="/js/jquery.js"></script>
		<script src="/bootstrap/js/bootstrap.min.js"></script>
	</head>
	<body>
		<main>
			<h1><%= sTitle %></h1>
			<div class="container">
				<form id="Loader">
					<div class="form-group">
						<label for="username">Username</label>
						<input type="text" class="form-control form-control-sm" id="username" name="username" placeholder="Enter the username"
						<% if (sUsername) { %>
							   value="<%= sUsername %>"
								<% } %>
						/>
					</div>
					<div class="form-group">
						<label for="list">List</label>
						<select class="form-control form-control-sm" id="list" name="list" aria-describedby="listHelp">
							<% for (var sKey in oListCaptions) { %>
								<option value="<%= sKey %>"
										<% if (sKey == sList) { _%>
										selected
										<%_ } _%>
								>
									<%= oListCaptions[sKey] %>
								</option>
							<% } %>
						</select>
						<small id="listHelp" class="form-text text-muted">What do you want to calculate scores for?</small>
					</div>
					<button type="submit" class="btn btn-primary">Calculate</button>
				</form>
			</div>
			<form id="DecisionMatrix">
				<input type="hidden" id="mal_ids" value="<% aEntries.forEach((oEntry) => { -%>
							<%= oEntry.mal_id -%>,
						<% }); -%>"/>
				<table class="table">
					<thead>
					<tr>
						<th scope="col">Is &darr; better than &rarr;?</th>
						<%# Create columns and asign initial positions. %>
						<% let iPos = 0 %>
						<% aEntries.forEach((oEntry) =>{ %>
							<% oEntry['position'] = iPos; %>
							<% iPos++; %>
							<%- include('templates/colHeader', {oEntry: oEntry}); %>
						<% }); %>
						<th scope="col">Total</th>
						<th scope="col">Score</th>
						<th scope="col">MAL Score</th>
					</tr>
					</thead>
					<tbody>
					<% aEntries.forEach((oEntry) => { %>
						<tr>
							<%- include('templates/rowHeader', {oEntry: oEntry}); %>
							<% aEntries.forEach((oEntryToCompareWith) => { %>
								<td>
									<% if (oEntryToCompareWith.position <= oEntry.position) { %>
										<input type="checkbox" id="<%= oEntry.mal_id %>gt<%= oEntryToCompareWith.mal_id %>"
											   class="form-check-input position-static m-0" disabled />
									<% } else { %>
										<input type="checkbox" id="<%= oEntry.mal_id %>gt<%= oEntryToCompareWith.mal_id %>"
											   class="form-check-input position-static m-0" checked />
									<% } %>
								</td>
							<% }); %>
							<td><input type="number" id="<%= oEntry.mal_id %>total" class="form-control-plaintext form-control-sm" readonly /></td>
							<td><input type="number" id="<%= oEntry.mal_id %>score"  class="form-control-plaintext form-control-sm" readonly /></td>
							<td><input type="number" id="<%= oEntry.mal_id %>integer_score" class="form-control-plaintext form-control-sm" maxlength="2" readonly /></td>
						</tr>
					<% }); %>
					</tbody>
				</table>
			</form>
		</main>
	</body>
</html>
